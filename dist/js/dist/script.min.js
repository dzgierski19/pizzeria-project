"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}var select={templateOf:{menuProduct:"#template-menu-product"},containerOf:{menu:"#product-list",cart:"#cart"},all:{menuProducts:"#product-list > .product",menuProductsActive:"#product-list > .product.active",formInputs:"input, select"},menuProduct:{clickable:".product__header",form:".product__order",priceElem:".product__total-price .price",imageWrapper:".product__images",amountWidget:".widget-amount",cartButton:'[href="#add-to-cart"]'},widgets:{amount:{input:'input[name="amount"]',linkDecrease:'a[href="#less"]',linkIncrease:'a[href="#more"]'}}},classNames={menuProduct:{wrapperActive:"active",imageVisible:"active"}},settings={amountWidget:{defaultValue:1,defaultMin:1,defaultMax:9}},templates={menuProduct:Handlebars.compile(document.querySelector(select.templateOf.menuProduct).innerHTML)},Product=function(){function n(e,t){_classCallCheck(this,n);var r=this;r.id=e,r.data=t,r.renderInMenu(),r.getElements(),r.initAccordion(),r.initOrderForm(),r.processOrder()}return _createClass(n,[{key:"renderInMenu",value:function(){var e=this,t=templates.menuProduct(e.data);e.element=utils.createDOMFromHTML(t),document.querySelector(select.containerOf.menu).appendChild(e.element)}},{key:"getElements",value:function(){var e=this;e.accordionTrigger=e.element.querySelector(select.menuProduct.clickable),e.form=e.element.querySelector(select.menuProduct.form),e.formInputs=e.form.querySelectorAll(select.all.formInputs),e.cartButton=e.element.querySelector(select.menuProduct.cartButton),e.priceElem=e.element.querySelector(select.menuProduct.priceElem),e.imageWrapper=e.element.querySelector(select.menuProduct.imageWrapper),console.log(e.imageWrapper)}},{key:"initAccordion",value:function(){var r=this;r.accordionTrigger.addEventListener("click",function(e){e.preventDefault();var t=document.querySelector(select.all.menuProductsActive);null!=t&&t!=r.element&&t.classList.remove(classNames.menuProduct.wrapperActive),r.element.classList.toggle(classNames.menuProduct.wrapperActive)})}},{key:"initOrderForm",value:function(){var t=this;t.form.addEventListener("submit",function(e){e.preventDefault(),t.processOrder()});var e=!0,r=!1,n=void 0;try{for(var a,c=t.formInputs[Symbol.iterator]();!(e=(a=c.next()).done);e=!0){a.value.addEventListener("change",function(){t.processOrder()})}}catch(e){r=!0,n=e}finally{try{e||null==c.return||c.return()}finally{if(r)throw n}}t.cartButton.addEventListener("click",function(e){e.preventDefault(),t.processOrder()})}},{key:"processOrder",value:function(){var e=this,t=utils.serializeFormToObject(e.form),r=e.data.price;for(var n in e.data.params){var a=e.data.params[n];for(var c in a.options){var o=a.options[c],i=t[n].includes(c);t[n]&&i?o.default||(r+=o.price):o.default&&(r-=o.price)}e.priceElem.innerHTML=r}}}]),n}(),app={initMenu:function(){for(var e in this.data.products)new Product(e,this.data.products[e])},initData:function(){this.data=dataSource},init:function(){var e=this;console.log("*** App starting ***"),console.log("thisApp:",e),console.log("classNames:",classNames),console.log("settings:",settings),console.log("templates:",templates),e.initData(),e.initMenu()}};app.init();
//# sourceMappingURL=script.min.js.map
