{"version":3,"sources":["script.js"],"names":["select","templateOf","menuProduct","containerOf","menu","cart","all","menuProducts","menuProductsActive","formInputs","clickable","form","priceElem","imageWrapper","amountWidget","cartButton","widgets","amount","input","linkDecrease","linkIncrease","classNames","wrapperActive","imageVisible","settings","defaultValue","defaultMin","defaultMax","templates","Handlebars","compile","document","querySelector","innerHTML","Product","id","data","thisProduct","renderInMenu","getElements","initAccordion","initOrderForm","processOrder","generatedHTML","element","utils","createDOMFromHTML","menuContainer","appendChild","accordionTrigger","querySelectorAll","console","log","addEventListener","event","preventDefault","activeProduct","classList","remove","toggle","formData","serializeFormToObject","price","paramId","params","param","optionId","options","option","selected","includes","app","initMenu","thisApp","productData","products","initData","dataSource","init"],"mappings":";;;;;;;;AAAA;AAA2C;AAC3C;AACE;;AACA,MAAMA,MAAM,GAAG;AACbC,IAAAA,UAAU,EAAE;AACVC,MAAAA,WAAW,EAAE;AADH,KADC;AAIbC,IAAAA,WAAW,EAAE;AACXC,MAAAA,IAAI,EAAE,eADK;AAEXC,MAAAA,IAAI,EAAE;AAFK,KAJA;AAQbC,IAAAA,GAAG,EAAE;AACHC,MAAAA,YAAY,EAAE,0BADX;AAEHC,MAAAA,kBAAkB,EAAE,iCAFjB;AAGHC,MAAAA,UAAU,EAAE;AAHT,KARQ;AAabP,IAAAA,WAAW,EAAE;AACXQ,MAAAA,SAAS,EAAE,kBADA;AAEXC,MAAAA,IAAI,EAAE,iBAFK;AAGXC,MAAAA,SAAS,EAAE,8BAHA;AAIXC,MAAAA,YAAY,EAAE,kBAJH;AAKXC,MAAAA,YAAY,EAAE,gBALH;AAMXC,MAAAA,UAAU,EAAE;AAND,KAbA;AAqBbC,IAAAA,OAAO,EAAE;AACPC,MAAAA,MAAM,EAAE;AACNC,QAAAA,KAAK,EAAE,sBADD;AAENC,QAAAA,YAAY,EAAE,iBAFR;AAGNC,QAAAA,YAAY,EAAE;AAHR;AADD;AArBI,GAAf;AA6BA,MAAMC,UAAU,GAAG;AACjBnB,IAAAA,WAAW,EAAE;AACXoB,MAAAA,aAAa,EAAE,QADJ;AAEXC,MAAAA,YAAY,EAAE;AAFH;AADI,GAAnB;AAMA,MAAMC,QAAQ,GAAG;AACfV,IAAAA,YAAY,EAAE;AACZW,MAAAA,YAAY,EAAE,CADF;AAEZC,MAAAA,UAAU,EAAE,CAFA;AAGZC,MAAAA,UAAU,EAAE;AAHA;AADC,GAAjB;AAOA,MAAMC,SAAS,GAAG;AAChB1B,IAAAA,WAAW,EAAE2B,UAAU,CAACC,OAAX,CAAmBC,QAAQ,CAACC,aAAT,CAAuBhC,MAAM,CAACC,UAAP,CAAkBC,WAAzC,EAAsD+B,SAAzE;AADG,GAAlB;;AA5CF,MA+CQC,OA/CR;AAAA;AAAA;AAgDI,qBAAYC,EAAZ,EAAgBC,IAAhB,EAAqB;AAAA;;AACnB,UAAMC,WAAW,GAAG,IAApB;AACAA,MAAAA,WAAW,CAACF,EAAZ,GAAiBA,EAAjB;AACAE,MAAAA,WAAW,CAACD,IAAZ,GAAmBA,IAAnB;AACAC,MAAAA,WAAW,CAACC,YAAZ;AACAD,MAAAA,WAAW,CAACE,WAAZ;AACAF,MAAAA,WAAW,CAACG,aAAZ;AACAH,MAAAA,WAAW,CAACI,aAAZ;AACAJ,MAAAA,WAAW,CAACK,YAAZ,GARmB,CASnB;AACD;;AA1DL;AAAA;AAAA,qCA2DkB;AACZ,YAAML,WAAW,GAAG,IAApB;AACA;;AACA,YAAMM,aAAa,GAAGf,SAAS,CAAC1B,WAAV,CAAsBmC,WAAW,CAACD,IAAlC,CAAtB;AACA;;AACAC,QAAAA,WAAW,CAACO,OAAZ,GAAsBC,KAAK,CAACC,iBAAN,CAAwBH,aAAxB,CAAtB;AACA;;AACA,YAAMI,aAAa,GAAGhB,QAAQ,CAACC,aAAT,CAAuBhC,MAAM,CAACG,WAAP,CAAmBC,IAA1C,CAAtB;AACA;;AACA2C,QAAAA,aAAa,CAACC,WAAd,CAA0BX,WAAW,CAACO,OAAtC;AACD;AArEL;AAAA;AAAA,oCAsEiB;AACX,YAAMP,WAAW,GAAG,IAApB;AACAA,QAAAA,WAAW,CAACY,gBAAZ,GAA+BZ,WAAW,CAACO,OAAZ,CAAoBZ,aAApB,CAAkChC,MAAM,CAACE,WAAP,CAAmBQ,SAArD,CAA/B,CAFW,CAGX;;AACA2B,QAAAA,WAAW,CAAC1B,IAAZ,GAAmB0B,WAAW,CAACO,OAAZ,CAAoBZ,aAApB,CAAkChC,MAAM,CAACE,WAAP,CAAmBS,IAArD,CAAnB,CAJW,CAKX;;AACA0B,QAAAA,WAAW,CAAC5B,UAAZ,GAAyB4B,WAAW,CAAC1B,IAAZ,CAAiBuC,gBAAjB,CAAkClD,MAAM,CAACM,GAAP,CAAWG,UAA7C,CAAzB,CANW,CAOX;;AACA4B,QAAAA,WAAW,CAACtB,UAAZ,GAAyBsB,WAAW,CAACO,OAAZ,CAAoBZ,aAApB,CAAkChC,MAAM,CAACE,WAAP,CAAmBa,UAArD,CAAzB,CARW,CASX;;AACAsB,QAAAA,WAAW,CAACzB,SAAZ,GAAwByB,WAAW,CAACO,OAAZ,CAAoBZ,aAApB,CAAkChC,MAAM,CAACE,WAAP,CAAmBU,SAArD,CAAxB,CAVW,CAWX;;AACAyB,QAAAA,WAAW,CAACxB,YAAZ,GAA2BwB,WAAW,CAACO,OAAZ,CAAoBZ,aAApB,CAAkChC,MAAM,CAACE,WAAP,CAAmBW,YAArD,CAA3B;AACAsC,QAAAA,OAAO,CAACC,GAAR,CAAYf,WAAW,CAACxB,YAAxB;AACD;AApFL;AAAA;AAAA,sCAqFmB;AACb,YAAMwB,WAAW,GAAG,IAApB;AACA;;AACAA,QAAAA,WAAW,CAACY,gBAAZ,CAA6BI,gBAA7B,CAA8C,OAA9C,EAAuD,UAASC,KAAT,EAAgB;AACrE;AACAA,UAAAA,KAAK,CAACC,cAAN;AACA;;AACA,cAAMC,aAAa,GAAGzB,QAAQ,CAACC,aAAT,CAAuBhC,MAAM,CAACM,GAAP,CAAWE,kBAAlC,CAAtB,CAJqE,CAKrE;;AACA;;AACA,cAAIgD,aAAa,IAAI,IAAjB,IAAyBA,aAAa,IAAInB,WAAW,CAACO,OAA1D,EAAmE;AACjEY,YAAAA,aAAa,CAACC,SAAd,CAAwBC,MAAxB,CAA+BrC,UAAU,CAACnB,WAAX,CAAuBoB,aAAtD;AACD;AACD;;;AACAe,UAAAA,WAAW,CAACO,OAAZ,CAAoBa,SAApB,CAA8BE,MAA9B,CAAqCtC,UAAU,CAACnB,WAAX,CAAuBoB,aAA5D;AACD,SAZD;AAaD;AArGL;AAAA;AAAA,sCAsGmB;AACb,YAAMe,WAAW,GAAG,IAApB,CADa,CAEb;;AACAA,QAAAA,WAAW,CAAC1B,IAAZ,CAAiB0C,gBAAjB,CAAkC,QAAlC,EAA4C,UAASC,KAAT,EAAe;AACzDA,UAAAA,KAAK,CAACC,cAAN;AACAlB,UAAAA,WAAW,CAACK,YAAZ;AACD,SAHD;AAHa;AAAA;AAAA;;AAAA;AAOb,+BAAiBL,WAAW,CAAC5B,UAA7B,8HAAwC;AAAA,gBAAhCS,KAAgC;AACtCA,YAAAA,KAAK,CAACmC,gBAAN,CAAuB,QAAvB,EAAiC,YAAU;AACzChB,cAAAA,WAAW,CAACK,YAAZ;AACD,aAFD;AAGD;AAXY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAYbL,QAAAA,WAAW,CAACtB,UAAZ,CAAuBsC,gBAAvB,CAAwC,OAAxC,EAAiD,UAASC,KAAT,EAAe;AAC9DA,UAAAA,KAAK,CAACC,cAAN;AACAlB,UAAAA,WAAW,CAACK,YAAZ;AACD,SAHD;AAID;AAtHL;AAAA;AAAA,qCAuHkB;AACZ,YAAML,WAAW,GAAG,IAApB,CADY,CAEZ;AACA;;AACA,YAAMuB,QAAQ,GAAGf,KAAK,CAACgB,qBAAN,CAA4BxB,WAAW,CAAC1B,IAAxC,CAAjB,CAJY,CAKZ;AACA;;AACA,YAAImD,KAAK,GAAGzB,WAAW,CAACD,IAAZ,CAAiB0B,KAA7B,CAPY,CAQZ;;AACA,aAAI,IAAIC,OAAR,IAAmB1B,WAAW,CAACD,IAAZ,CAAiB4B,MAApC,EAA4C;AAC1C;AACA,cAAMC,KAAK,GAAG5B,WAAW,CAACD,IAAZ,CAAiB4B,MAAjB,CAAwBD,OAAxB,CAAd,CAF0C,CAG1C;AACA;;AACA,eAAI,IAAIG,QAAR,IAAoBD,KAAK,CAACE,OAA1B,EAAmC;AACjC;AACA,gBAAMC,MAAM,GAAGH,KAAK,CAACE,OAAN,CAAcD,QAAd,CAAf,CAFiC,CAGjC;;AACA,gBAAMG,QAAQ,GAAGT,QAAQ,CAACG,OAAD,CAAR,CAAkBO,QAAlB,CAA2BJ,QAA3B,CAAjB,CAJiC,CAKjC;AACA;;AACA,gBAAGN,QAAQ,CAACG,OAAD,CAAR,IAAqBM,QAAxB,EAAkC;AAChC;AACA,kBAAG,CAACD,MAAM,WAAV,EAAoB;AAClB;AACA;AACAN,gBAAAA,KAAK,IAAIM,MAAM,CAACN,KAAhB;AACD;AACF,aAPD,CAOE;AAPF,iBAQK,IAAIM,MAAM,WAAV,EAAoB;AACvB;AACA;AACAN,gBAAAA,KAAK,IAAIM,MAAM,CAACN,KAAhB;AACD;AACF,WAzByC,CA0B1C;;;AACAzB,UAAAA,WAAW,CAACzB,SAAZ,CAAsBqB,SAAtB,GAAkC6B,KAAlC;AACD;AACF;AA7JL;;AAAA;AAAA;;AA+JE,MAAMS,GAAG,GAAG;AACVC,IAAAA,QAAQ,EAAE,oBAAW;AACnB,UAAMC,OAAO,GAAG,IAAhB,CADmB,CAEnB;;AACA,WAAI,IAAIC,WAAR,IAAuBD,OAAO,CAACrC,IAAR,CAAauC,QAApC,EAA6C;AAC3C,YAAIzC,OAAJ,CAAYwC,WAAZ,EAAyBD,OAAO,CAACrC,IAAR,CAAauC,QAAb,CAAsBD,WAAtB,CAAzB;AACD;AACF,KAPS;AAQVE,IAAAA,QAAQ,EAAE,oBAAU;AAClB,UAAMH,OAAO,GAAG,IAAhB;AACAA,MAAAA,OAAO,CAACrC,IAAR,GAAeyC,UAAf;AACD,KAXS;AAYVC,IAAAA,IAAI,EAAE,gBAAU;AACd,UAAML,OAAO,GAAG,IAAhB;AACAtB,MAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBqB,OAAxB;AACAtB,MAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2B/B,UAA3B;AACA8B,MAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyB5B,QAAzB;AACA2B,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BxB,SAA1B;AACA6C,MAAAA,OAAO,CAACG,QAAR;AACAH,MAAAA,OAAO,CAACD,QAAR;AACD;AArBS,GAAZ;AAuBAD,EAAAA,GAAG,CAACO,IAAJ;AACD","sourcesContent":["/* global Handlebars, utils, dataSource */ // eslint-disable-line no-unused-vars\n{\n  'use strict';\n  const select = {\n    templateOf: {\n      menuProduct: '#template-menu-product',\n    },\n    containerOf: {\n      menu: '#product-list',\n      cart: '#cart',\n    },\n    all: {\n      menuProducts: '#product-list > .product',\n      menuProductsActive: '#product-list > .product.active',\n      formInputs: 'input, select',\n    },\n    menuProduct: {\n      clickable: '.product__header',\n      form: '.product__order',\n      priceElem: '.product__total-price .price',\n      imageWrapper: '.product__images',\n      amountWidget: '.widget-amount',\n      cartButton: '[href=\"#add-to-cart\"]',\n    },\n    widgets: {\n      amount: {\n        input: 'input[name=\"amount\"]',\n        linkDecrease: 'a[href=\"#less\"]',\n        linkIncrease: 'a[href=\"#more\"]',\n      },\n    },\n  };\n  const classNames = {\n    menuProduct: {\n      wrapperActive: 'active',\n      imageVisible: 'active',\n    },\n  };\n  const settings = {\n    amountWidget: {\n      defaultValue: 1,\n      defaultMin: 1,\n      defaultMax: 9,\n    }\n  };\n  const templates = {\n    menuProduct: Handlebars.compile(document.querySelector(select.templateOf.menuProduct).innerHTML),\n  };\n  class Product{\n    constructor(id, data){\n      const thisProduct = this;\n      thisProduct.id = id;\n      thisProduct.data = data;\n      thisProduct.renderInMenu();\n      thisProduct.getElements();\n      thisProduct.initAccordion();\n      thisProduct.initOrderForm();\n      thisProduct.processOrder();\n      // console.log('new Product:', thisProduct);\n    }\n    renderInMenu(){\n      const thisProduct = this;\n      /* Generate HTML based on template */\n      const generatedHTML = templates.menuProduct(thisProduct.data);\n      /* create element using utils.createElementFromHTML */\n      thisProduct.element = utils.createDOMFromHTML(generatedHTML);\n      /* find menu container */\n      const menuContainer = document.querySelector(select.containerOf.menu);\n      /* add element to menu */\n      menuContainer.appendChild(thisProduct.element);\n    }\n    getElements(){\n      const thisProduct = this;\n      thisProduct.accordionTrigger = thisProduct.element.querySelector(select.menuProduct.clickable);\n      // console.log(thisProduct.accordionTrigger);\n      thisProduct.form = thisProduct.element.querySelector(select.menuProduct.form);\n      // console.log(thisProduct.form);\n      thisProduct.formInputs = thisProduct.form.querySelectorAll(select.all.formInputs);\n      // console.log(thisProduct.formInputs);\n      thisProduct.cartButton = thisProduct.element.querySelector(select.menuProduct.cartButton);\n      // console.log(thisProduct.cartButton);\n      thisProduct.priceElem = thisProduct.element.querySelector(select.menuProduct.priceElem);\n      // console.log(thisProduct.priceElem);\n      thisProduct.imageWrapper = thisProduct.element.querySelector(select.menuProduct.imageWrapper);\n      console.log(thisProduct.imageWrapper);\n    }\n    initAccordion(){\n      const thisProduct = this;\n      /* START: add event listener to clickable trigger on event click */\n      thisProduct.accordionTrigger.addEventListener('click', function(event) {\n        /* prevent default action for event */\n        event.preventDefault();\n        /* find active product (product that has active class) */\n        const activeProduct = document.querySelector(select.all.menuProductsActive);\n        // console.log(activeProduct);\n        /* if there is active product and it's not thisProduct.element, remove class active from it */\n        if (activeProduct != null && activeProduct != thisProduct.element) {\n          activeProduct.classList.remove(classNames.menuProduct.wrapperActive);\n        }\n        /* toggle active class on thisProduct.element */\n        thisProduct.element.classList.toggle(classNames.menuProduct.wrapperActive);\n      });\n    }\n    initOrderForm(){\n      const thisProduct = this;\n      // console.log('initOrderForm method executed');\n      thisProduct.form.addEventListener('submit', function(event){\n        event.preventDefault();\n        thisProduct.processOrder();\n      });\n      for(let input of thisProduct.formInputs){\n        input.addEventListener('change', function(){\n          thisProduct.processOrder();\n        });\n      }\n      thisProduct.cartButton.addEventListener('click', function(event){\n        event.preventDefault();\n        thisProduct.processOrder();\n      });\n    }\n    processOrder(){\n      const thisProduct = this;\n      // console.log('processOrder method executed');\n      // covert form to object structure e.g. { sauce: ['tomato'], toppings: ['olives', 'redPeppers']}\n      const formData = utils.serializeFormToObject(thisProduct.form);\n      // console.log('formData', formData);\n      // set price to default price\n      let price = thisProduct.data.price;\n      // for every category (param)...\n      for(let paramId in thisProduct.data.params) {\n        // determine param value, e.g. paramId = 'toppings', param = { label: 'Toppings', type: 'checkboxes'... }\n        const param = thisProduct.data.params[paramId];\n        // console.log(paramId, param);\n        // for every option in this category\n        for(let optionId in param.options) {\n          // determine option value, e.g. optionId = 'olives', option = { label: 'Olives', price: 2, default: true }\n          const option = param.options[optionId];\n          // define when element is selected\n          const selected = formData[paramId].includes(optionId);\n          // console.log(optionId, option);\n          // check if there is param with a name of paramId in formData and if it includes optionId\n          if(formData[paramId] && selected) {\n            // check if the option is not default\n            if(!option.default) {\n              // add option price to price variable\n              // console.log('opt1');\n              price += option.price;\n            }\n          } // check if the option is default\n          else if (option.default) {\n            // reduce price variable\n            // console.log('opt2');\n            price -= option.price;\n          }\n        }\n        // update calculated price in the HTML\n        thisProduct.priceElem.innerHTML = price;\n      }\n    }\n  }\n  const app = {\n    initMenu: function() {\n      const thisApp = this;\n      // console.log('thisApp.data:', thisApp.data);\n      for(let productData in thisApp.data.products){\n        new Product(productData, thisApp.data.products[productData]);\n      }\n    },\n    initData: function(){\n      const thisApp = this;\n      thisApp.data = dataSource;\n    },\n    init: function(){\n      const thisApp = this;\n      console.log('*** App starting ***');\n      console.log('thisApp:', thisApp);\n      console.log('classNames:', classNames);\n      console.log('settings:', settings);\n      console.log('templates:', templates);\n      thisApp.initData();\n      thisApp.initMenu();\n    },\n  };\n  app.init();\n}"],"file":"script.dev.js"}