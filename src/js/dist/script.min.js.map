{"version":3,"sources":["script.js"],"names":["select","templateOf","menuProduct","containerOf","menu","cart","all","menuProducts","imageWrapper","formInputs","amount","clickable","form","cartButton","widgets","linkIncrease","amountWidget","defaultValue","defaultMin","classNames","imageVisible","Handlebars","compile","document","querySelector","innerHTML","settings","id","data","_classCallCheck","this","Product","defaultMax","thisProduct","renderInMenu","templates","initAccordion","console","log","_createClass","key","value","generatedHTML","element","utils","createDOMFromHTML","addEventListener","event","preventDefault","wrapperActive","activeProduct","contains","classlist","remove","classList","toggle","app","initMenu","clickableTrigger","thisApp","productData","products","initData","init"],"mappings":"mZAGE,IAAMA,OAAS,CACbC,WAAY,CACVC,YAAa,0BAEfC,YAAa,CAPjBC,KAAA,gBAA2CC,KAAA,SAEzCC,IAAA,CAUIC,aAAc,2BATZP,mBAAS,kCACbC,WAAY,iBAAAC,YADC,CAIbC,UAAa,mBACXC,KAAM,kBACNC,UAAM,+BANKG,aAAA,mBAQbF,aAAK,iBACHC,WAAY,yBAEZE,QAAAA,CAXWC,OAAA,CAabR,MAAW,uBACTS,aAAW,kBACXC,aAAM,qBAINC,WAAY,CANDX,YAbA,CAqBbY,cAAS,SACPJ,aAAQ,WAGNK,SAAAA,CAHMC,aAAA,CADDC,aAAA,EArBXC,WAAA,EA6BMC,WAAU,IAGZC,UAAc,CAFHlB,YAAAmB,WAAAC,QAAAC,SAAAC,cAAAxB,OAAAC,WAAAC,aAAAuB,YAKTC,QArCR,WAsCIV,SAAAA,EAAYW,EAAEC,GAAAC,gBAAAC,KAAAC,GACZd,IAAAA,EADYa,KAEZZ,EAAYS,GAFAA,EAGZK,EAAYJ,KAAAA,EAJhBK,EAAAC,eAOMC,EAAYC,gBAAlBC,QAAAC,IAAA,eAAAL,GA5CF,OAAAM,aAAAR,EAAA,CAAA,CAAAS,IAAA,eAAAC,MAAA,WAAA,IAAAR,EAAAH,KAgDIY,EAAgBd,UAAK1B,YAAA+B,EAAAL,MAenBK,EAAYU,QAAUC,MAAMC,kBAAkBH,GAb9CnB,SAAAC,cAAAxB,OAAAG,YAAAC,MAGY8B,YAAZD,EAAAU,WArDN,CAAAH,IAAA,gBAAAC,MAAA,WAyDK,IAAAR,EAAAH,KAzDLG,EAAAU,QAAAnB,cAAAxB,OAAAE,YAAAS,WA6EuBmC,iBAAiB,QAAS,SAASC,GAfpDA,EAAAC,iBACAf,IAAAA,EAAsBW,SAAMC,cAAN1B,WAAwBuB,YAA9CO,eAGA,MAAAC,GAAAA,EAAAC,SAAA,WAAAD,GAAAjB,EAAAU,SAoBIO,EAAcE,UAAUC,OAAO,UAtFzCpB,EAAAU,QAAAW,UAAAC,OAAA,gBAAAxB,EAAA,GA8FQyB,IAAM,CArBRC,SAAMC,WAuBN,IAAMC,EAAU7B,KAEhB,IAAI,IAAI8B,KAtBRvB,QAAAC,IAAA,gBAAAqB,EAAA/B,MAsBuB+B,EAAQ/B,KAAKiC,SArBpCH,IAAAA,QAAAA,EAAiBZ,EAAjBlB,KAAkCiC,SAASD,KAGzCE,SAAA,WAuBchC,KAtBRoB,KAAAA,YAGNa,KAAA,WAuBF,IAAMJ,EAAU7B,KAtBdO,QAAOa,IAAAA,wBACLA,QAAAA,IAAAA,WAAcE,GACff,QAAAC,IAAA,cAAAnB,YACDkB,QAAAC,IAAA,YAAAZ,UAwBFW,QAAQC,IAAI,aAAcH,WAC1BwB,EAAQG,WAxBN7B,EAAAA,aAzFRuB,IAAAO","file":"script.min.js","sourcesContent":["/* global Handlebars, utils, dataSource */ // eslint-disable-line no-unused-vars\n{\n  'use strict';\n  const select = {\n    templateOf: {\n      menuProduct: '#template-menu-product',\n    },\n    containerOf: {\n      menu: '#product-list',\n      cart: '#cart',\n    },\n    all: {\n      menuProducts: '#product-list > .product',\n      menuProductsActive: '#product-list > .product.active',\n      formInputs: 'input, select',\n    },\n    menuProduct: {\n      clickable: '.product__header',\n      form: '.product__order',\n      priceElem: '.product__total-price .price',\n      imageWrapper: '.product__images',\n      amountWidget: '.widget-amount',\n      cartButton: '[href=\"#add-to-cart\"]',\n    },\n    widgets: {\n      amount: {\n        input: 'input[name=\"amount\"]',\n        linkDecrease: 'a[href=\"#less\"]',\n        linkIncrease: 'a[href=\"#more\"]',\n      },\n    },\n  };\n  const classNames = {\n    menuProduct: {\n      wrapperActive: 'active',\n      imageVisible: 'active',\n    },\n  };\n  const settings = {\n    amountWidget: {\n      defaultValue: 1,\n      defaultMin: 1,\n      defaultMax: 9,\n    }\n  };\n  const templates = {\n    menuProduct: Handlebars.compile(document.querySelector(select.templateOf.menuProduct).innerHTML),\n  };\n  class Product{\n    constructor(id, data){\n      const thisProduct = this;\n      thisProduct.id = id;\n      thisProduct.data = data;\n\n      thisProduct.renderInMenu();\n      thisProduct.initAccordion();\n\n      console.log('new Product:', thisProduct);\n    }\n    renderInMenu(){\n      const thisProduct = this;\n      /* Generate HTML based on template */\n      const generatedHTML = templates.menuProduct(thisProduct.data);\n      /* create element using utils.createElementFromHTML */\n      thisProduct.element = utils.createDOMFromHTML(generatedHTML);\n      /* find menu container */\n      const menuContainer = document.querySelector(select.containerOf.menu);\n      /* add element to menu */\n      menuContainer.appendChild(thisProduct.element);\n    }\n    initAccordion(){\n      const thisProduct = this;\n\n      /* find the clickable trigger (the element that should react to clicking) */\n      const clickableTrigger = thisProduct.element.querySelector(select.menuProduct.clickable);\n      // console.log(clickableTrigger);\n\n      /* START: add event listener to clickable trigger on event click */\n      clickableTrigger.addEventListener('click', function(event) {\n        /* prevent default action for event */\n        event.preventDefault();\n        /* find active product (product that has active class) */\n        const activeProduct = document.querySelector(classNames.menuProduct.wrapperActive);\n        // console.log(activeProduct);\n\n        /* if there is active product and it's not thisProduct.element, remove class active from it */\n        if ( ((activeProduct != null) && activeProduct.contains('active')) && (activeProduct != thisProduct.element) ) {\n          activeProduct.classlist.remove('active');\n        }\n        /* toggle active class on thisProduct.element */\n        thisProduct.element.classList.toggle('active');\n      });\n    }\n  }\n\n  const app = {\n    initMenu: function() {\n      const thisApp = this;\n      console.log('thisApp.data:', thisApp.data);\n      for(let productData in thisApp.data.products){\n        new Product(productData, thisApp.data.products[productData]);\n      }\n    },\n    initData: function(){\n      const thisApp = this;\n      thisApp.data = dataSource;\n    },\n    init: function(){\n      const thisApp = this;\n      console.log('*** App starting ***');\n      console.log('thisApp:', thisApp);\n      console.log('classNames:', classNames);\n      console.log('settings:', settings);\n      console.log('templates:', templates);\n      thisApp.initData();\n      thisApp.initMenu();\n    },\n  };\n  app.init();\n}"]}